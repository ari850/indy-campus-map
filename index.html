<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Indy Campus Map</title>
  <style>
    body { margin:0; font-family: system-ui, Arial, sans-serif; }
    #campus { max-width:100%; height:auto; display:block; }
    area { cursor:pointer; }
    #lightbox { position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.6); z-index:9999; padding:24px; }
    #lightbox[aria-hidden="false"] { display:grid; }
    .lb-card { background:#fff; border-radius:14px; max-width:min(900px,92vw); width:fit-content; max-height:82vh; overflow:auto; box-shadow:0 10px 30px rgba(0,0,0,.3); }
    .lb-head{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;border-bottom:1px solid #eee}
    .lb-head h2{margin:0;font-size:16px;font-weight:600}
    .lb-close{border:0;background:transparent;font-size:22px;line-height:1;cursor:pointer;padding:4px 8px}
    .lb-body{padding:10px 14px 16px}
    .lb-body img{max-width:100%;height:auto;display:block;border-radius:10px}
    .lb-cap{margin:10px 2px 2px;color:#444;font-size:14px}
    .lb-error{margin:10px 2px;color:#b00020;font-size:14px;display:none}
  </style>
</head>
<body>

<img id="campus" src="Indy_Campus_Map.png" usemap="#image-map" alt="Purdue Indianapolis map" decoding="async">

<map name="image-map">
  <!-- LUX on Capitol (unchanged rectangle) -->
  <area
    shape="rect"
    coords="4620,1210,4760,1350"
    alt="LUX on Capitol"
    title="LUX on Capitol"
    href="#"
    data-img="LUX_pic.jpg"
    data-caption="LUX on Capitol — residence hall & apartments on North St.">

  <!-- Circles converted from generator points -->
  <area shape="circle" coords="3664,1318,70"
    alt="Student Center" title="Student Center"
    href="#" data-img="SC.jpg" data-caption="Student Center">

  <area shape="circle" coords="3330,1350,70"
    alt="Academic Success Building" title="Academic Success Building"
    href="#" data-img="ASB.jpg" data-caption="Academic Success Building">

  <area shape="circle" coords="3346,1556,70"
    alt="Informatics & Communications Technology Complex" title="Informatics & Communications Technology Complex"
    href="#" data-img="IT.jpg" data-caption="Informatics & Communications Technology Complex">

  <area shape="circle" coords="3102,1528,70"
    alt="Innovation Hall" title="Innovation Hall"
    href="#" data-img="IO.jpg" data-caption="Innovation Hall">

  <area shape="circle" coords="3102,1894,70"
    alt="Purdue Campus Connect Shuttle" title="Purdue Campus Connect Shuttle"
    href="#" data-img="bus.jpg" data-caption="Purdue Campus Connect Shuttle">

  <area shape="circle" coords="3404,1066,70"
    alt="STT" title="STT"
    href="#" data-img="STT.jpg" data-caption="STT">

  <area shape="circle" coords="2789,1512,70"
    alt="Engineering Science & Technology Building" title="Engineering Science & Technology Building"
    href="#" data-img="SL_LD.jpg" data-caption="Engineering Science & Technology Building">

  <area shape="circle" coords="2832,1685,70"
    alt="Science Building" title="Science Building"
    href="#" data-img="SL_LD.jpg" data-caption="Science Building">

  <area shape="circle" coords="2821,1889,70"
    alt="Science & Engineering Laboratory Building" title="Science & Engineering Laboratory Building"
    href="#" data-img="EL.jpg" data-caption="Science & Engineering Laboratory Building">

  <area shape="circle" coords="2545,1755,70"
    alt="University Library" title="University Library"
    href="#" data-img="Library.jpg" data-caption="University Library">

  <area shape="circle" coords="2487,1525,70"
    alt="Engineering Technology Building" title="Engineering Technology Building"
    href="#" data-img="ET_bldg.jpg" data-caption="Engineering Technology Building">

  <area shape="circle" coords="2487,951,70"
    alt="North Hall" title="North Hall"
    href="#" data-img="North_Hall.jpg" data-caption="North Hall">

  <area shape="circle" coords="2227,1223,70"
    alt="Hine Hall" title="Hine Hall"
    href="#" data-img="Hine_Hall.jpg" data-caption="Hine Hall">

  <area shape="circle" coords="2201,1729,70"
    alt="Taylor Hall" title="Taylor Hall"
    href="#" data-img="Taylor_hall.jpg" data-caption="Taylor Hall">

  <area shape="circle" coords="2158,1995,70"
    alt="Education Social Work Building" title="Education Social Work Building"
    href="#" data-img="ES.png" data-caption="Education Social Work Building">

  <area shape="circle" coords="1984,1810,70"
    alt="Lecture Hall" title="Lecture Hall"
    href="#" data-img="Lecture_hall.jpg" data-caption="Lecture Hall">

  <area shape="circle" coords="1994,1593,70"
    alt="Cavanaugh Hall" title="Cavanaugh Hall"
    href="#" data-img="Cavanaugh_hall.jpg" data-caption="Cavanaugh Hall">

  <area shape="circle" coords="1787,1539,70"
    alt="Campus Center" title="Campus Center"
    href="#" data-img="Campus_center.jpg" data-caption="Campus Center">
  
  <area shape="circle" coords="2811,1263,70"
    alt="Swimming in the White River" title="Swimming in the White River"
    href="#"
    data-img="Pete_river.png"
    data-caption="Purdue Pete swimming in the White River">
  
</map>


<div id="lightbox" aria-hidden="true" role="dialog" aria-modal="true">
  <div class="lb-card" role="document">
    <div class="lb-head">
      <h2 id="lb-title">Title</h2>
      <button class="lb-close" aria-label="Close">×</button>
    </div>
    <div class="lb-body">
      <img id="lb-img" alt="">
      <p id="lb-error" class="lb-error"></p>
      <p id="lb-cap" class="lb-cap"></p>
    </div>
  </div>
</div>

<script>
  (function () {
    const DEFAULT_RADIUS = 70; // hotspot size in ORIGINAL image pixels

    const img = document.getElementById('campus');
    const mapName = img.useMap ? img.useMap.replace('#','') : '';
    const map = document.querySelector('map[name="' + mapName + '"]');
    if (!map) return;
    const areas = Array.from(map.querySelectorAll('area'));

    // 1) Normalize: turn "x,y" into "x,y,r" circles; remember originals for scaling
    function normalizeAreas() {
      areas.forEach(a => {
        const raw = (a.coords || '').split(',').map(n => Number(n.trim())).filter(n => !Number.isNaN(n));
        if (raw.length === 2) {
          const [x, y] = raw;
          a.shape = 'circle';
          a.coords = [x, y, DEFAULT_RADIUS].join(',');
        }
        if (!a.dataset.originalCoords) a.dataset.originalCoords = a.coords;
      });
    }

    // 2) Scale coords to rendered size
    function scaleAreas() {
      const naturalW = img.naturalWidth || img.width;
      if (!naturalW) return;
      const scale = img.clientWidth / naturalW;
      areas.forEach(a => {
        const scaled = a.dataset.originalCoords.split(',').map(Number).map(v => Math.round(v * scale));
        a.coords = scaled.join(',');
      });
    }

    if (img.complete) { normalizeAreas(); scaleAreas(); }
    else { img.addEventListener('load', () => { normalizeAreas(); scaleAreas(); }); }
    window.addEventListener('resize', scaleAreas);

    // 3) Lightbox wiring with fallback to href if data-img is missing
    const lb = document.getElementById('lightbox');
    const lbImg = document.getElementById('lb-img');
    const lbTitle = document.getElementById('lb-title');
    const lbCap = document.getElementById('lb-cap');
    const lbErr = document.getElementById('lb-error');
    const closeBtn = document.querySelector('.lb-close');

    function openLB(src, title, cap) {
      lbErr.style.display = 'none';
      lbErr.textContent = '';
      lbImg.onerror = () => {
        lbErr.textContent = 'Could not load image: ' + src;
        lbErr.style.display = 'block';
        console.error('Lightbox image failed to load:', src);
      };
      lbImg.src = src;
      lbImg.alt = title || '';
      lbTitle.textContent = title || '';
      lbCap.textContent = cap || '';
      lb.setAttribute('aria-hidden','false');
      document.documentElement.style.overflow = 'hidden';
    }
    function closeLB() {
      lb.setAttribute('aria-hidden','true');
      lbImg.src = '';
      document.documentElement.style.overflow = '';
    }
    closeBtn.addEventListener('click', closeLB);
    lb.addEventListener('click', e => { if (e.target === lb) closeLB(); });
    document.addEventListener('keydown', e => { if (e.key === 'Escape') closeLB(); });

    areas.forEach(a => {
      a.addEventListener('click', e => {
        // Use data-img if present; otherwise fall back to href
        const src = a.dataset.img || a.getAttribute('href');
        if (!src || src === '#') return; // nothing to show
        e.preventDefault(); // stop navigation; show lightbox instead
        openLB(src, a.title || a.alt, a.dataset.caption || '');
      });
    });
  })();
</script>
</body>
</html>




